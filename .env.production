# ===========================================
# TIMEKEEPER - PRODUCTION CONFIGURATION
# ===========================================
# Konfigurasi optimal untuk deployment VPS
# Pastikan untuk mengubah nilai sesuai dengan server Anda

# Application Settings
APP_NAME="TimeKeeper"
APP_ENV=production
APP_KEY=base64:GENERATE_NEW_KEY_WITH_php_artisan_key:generate
APP_DEBUG=false
APP_URL=https://yourdomain.com

# Localization
APP_LOCALE=id
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=id_ID

# Maintenance & Workers
APP_MAINTENANCE_DRIVER=file
PHP_CLI_SERVER_WORKERS=4

# Security
BCRYPT_ROUNDS=12

# Logging - Optimized for production
LOG_CHANNEL=stack
LOG_STACK=daily
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=warning
LOG_DAILY_DAYS=14

# Database - MySQL/MariaDB untuk production
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=timekeeper_prod
DB_USERNAME=timekeeper_user
DB_PASSWORD=STRONG_DATABASE_PASSWORD_HERE

# Session - Redis untuk performa optimal
SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_ENCRYPT=true
SESSION_PATH=/
SESSION_DOMAIN=.yourdomain.com
SESSION_SECURE_COOKIES=true
SESSION_SAME_SITE=lax

# Broadcasting & Queue - Redis untuk skalabilitas
BROADCAST_CONNECTION=redis
QUEUE_CONNECTION=redis
QUEUE_FAILED_DRIVER=database

# Cache - Redis untuk performa maksimal
CACHE_STORE=redis
CACHE_PREFIX=timekeeper_prod

# Redis Configuration - Optimal untuk production
REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=REDIS_PASSWORD_HERE
REDIS_PORT=6379
REDIS_DB=0
REDIS_CACHE_DB=1
REDIS_SESSION_DB=2
REDIS_QUEUE_DB=3

# Redis Connection Pool & Retry Settings
REDIS_MAX_RETRIES=3
REDIS_BACKOFF_ALGORITHM=decorrelated_jitter
REDIS_BACKOFF_BASE=100
REDIS_BACKOFF_CAP=1000

# Mail Configuration - SMTP untuk production
MAIL_MAILER=smtp
MAIL_HOST=smtp.yourdomain.com
MAIL_PORT=587
MAIL_USERNAME=noreply@yourdomain.com
MAIL_PASSWORD=EMAIL_PASSWORD_HERE
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="noreply@yourdomain.com"
MAIL_FROM_NAME="${APP_NAME}"

# File Storage - Local atau S3 untuk production
FILESYSTEM_DISK=local
# Uncomment untuk AWS S3
# FILESYSTEM_DISK=s3
# AWS_ACCESS_KEY_ID=your_access_key
# AWS_SECRET_ACCESS_KEY=your_secret_key
# AWS_DEFAULT_REGION=ap-southeast-1
# AWS_BUCKET=timekeeper-storage
# AWS_USE_PATH_STYLE_ENDPOINT=false

# Vite Build
VITE_APP_NAME="${APP_NAME}"

# WebSocket/Pusher - Opsional untuk real-time features
# PUSHER_APP_ID=your_pusher_app_id
# PUSHER_APP_KEY=your_pusher_key
# PUSHER_APP_SECRET=your_pusher_secret
# PUSHER_HOST=
# PUSHER_PORT=443
# PUSHER_SCHEME=https
# PUSHER_APP_CLUSTER=ap1

# ===========================================
# PERFORMANCE & OPTIMIZATION SETTINGS
# ===========================================

# OPcache Settings (tambahkan ke php.ini)
# opcache.enable=1
# opcache.memory_consumption=256
# opcache.interned_strings_buffer=16
# opcache.max_accelerated_files=20000
# opcache.validate_timestamps=0
# opcache.save_comments=1
# opcache.fast_shutdown=1

# PHP-FPM Settings (untuk nginx)
# pm = dynamic
# pm.max_children = 50
# pm.start_servers = 5
# pm.min_spare_servers = 5
# pm.max_spare_servers = 35
# pm.max_requests = 1000

# ===========================================
# SECURITY HEADERS (untuk web server)
# ===========================================
# Tambahkan ke konfigurasi nginx/apache:
# X-Frame-Options: DENY
# X-Content-Type-Options: nosniff
# X-XSS-Protection: 1; mode=block
# Strict-Transport-Security: max-age=31536000; includeSubDomains
# Content-Security-Policy: default-src 'self'
# Referrer-Policy: strict-origin-when-cross-origin

# ===========================================
# MONITORING & HEALTH CHECK
# ===========================================
# Health check endpoint: /health
# Metrics endpoint: /admin/monitoring (requires auth)

# ===========================================
# BACKUP RECOMMENDATIONS
# ===========================================
# 1. Database: mysqldump daily dengan rotasi 30 hari
# 2. Files: rsync storage/ dan public/uploads/
# 3. Config: backup .env dan konfigurasi web server
# 4. Redis: BGSAVE untuk persistence data

# ===========================================
# DEPLOYMENT CHECKLIST
# ===========================================
# □ Generate APP_KEY baru
# □ Setup database dan user
# □ Install dan konfigurasi Redis
# □ Setup SSL certificate
# □ Konfigurasi web server (nginx/apache)
# □ Setup cron jobs untuk scheduler
# □ Setup supervisor untuk queue workers
# □ Test semua endpoints
# □ Setup monitoring dan logging
# □ Backup strategy